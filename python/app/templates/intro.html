<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>この商品の説明</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    {% include "header.html" %}
</head>

<body class="flex flex-col min-h-screen bg-orange-100">

    <main class="flex-grow flex items-center justify-center">
        <div class="text-center">
            <h2 class="text-2xl font-semibold mb-4 ">ようこそ SnapScore へ！</h2>
            <div class="text-gray-700 mx-6 my-4  border-b border-black">
                <h2 class="text-lg font-semibold mb-4">あなたのお弁当を点数化・分析しましょう！</h2>
                <div class="text-gray-700 mb-8">
                    <p>
                        snapscoreは弁当の写真を読み込み、
                    </p>
                    <p>弁当の色どりの良さを表示することができます。
                    </p>

                    <p>
                        会社の同僚や学校の友達と
                    </p>
                    <p>
                        スコアを見比べてみましょう！
                    </p>
                </div>
            </div>
            <div class="mb-4 items-center">
                <!-- 利用規約に同意する -->
                <p class="mr-4 text-xs">
                    サービス利用データは、Googleによって、
                </p>
                <p class="mr-4 text-xs">

                    <a href="https://policies.google.com/terms" target="_blank" class="text-blue-500 text-xs">利用規約</a>
                    のもと利用されます。

                </p>
                <p class="mr-4 text-xs">
                    機密情報や個人情報は含めないでください。
                </p>
            </div>

            <div class="flex justify-center">
                <div class="mb-4 flex">
                    <!-- 利用規約に同意する -->
                    <p class="mr-4 text-xs" id="term">
                        利用規約に同意する
                    </p>
                    <input type="checkbox" id="agree_toggle" class="mr-2">
                    <label for="agree_toggle"></label>
                </div>
            </div>
            <form action="/takepic" method="POST">
                <button id="start_button" type="submit" disabled="true"
                    class="bg-blue-600 text-white py-4 px-8 rounded-full shadow-lg text-lg disabled opacity-50">始める</button>
            </form>
        </div>
    </main>

    {% include "footer.html" %}

    <script>
        const startButton = document.getElementById('start_button');
        const term = document.getElementById('term');
        const agreeToggle = document.getElementById('agree_toggle')
        var access = {{ access }};

        console.log(access);

        //Cookieのaccessがtrueならチェックを飛ばす
        if (access) {
            term.classList.add('hidden');
            agreeToggle.classList.add('hidden');
            startButton.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
            startButton.disabled = false;
        } else {
            // 利用規約に同意するチェックボックスの状態が変わったときの処理
            agreeToggle.addEventListener('change', function () {
                if (this.checked) {
                    startButton.classList.remove('disabled', 'opacity-50', 'cursor-not-allowed');
                    startButton.disabled = false;
                } else {
                    startButton.classList.add('disabled', 'opacity-50', 'cursor-not-allowed');
                    startButton.disabled = true;

                }
            });
        }

        // 始めるボタンをクリックしたときの処理
        // startButton.addEventListener('click', function (event) {
        //     if (!agreeToggle.checked) {
        //         event.preventDefault();
        //         // alert('利用規約に同意してください。');
        //     } else {
        //         window.location.href = "/takepic"; // チェックが入っている場合のみページ遷移
        //     }
        // });

    </script>
</body>

</html>