<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éû„Ç§„Éö„Éº„Ç∏</title>
    <link rel="stylesheet" href="../static/css/style.css">
    {% include "header.html" %}
</head>

<body class="flex flex-col min-h-screen bg-orange-100">
    <main>
        <div class="">
            <!-- „Éó„É≠„Éï„Ç£„Éº„É´ -->
            <!-- Ë¶ÅÁ¥†„ÇíÊ®™„Å´ÈÖçÁΩÆ -->
            <div class="flex justify-left mx-auto py-2 bg-gray-300 bg-opacity-50 shadow-md">
                <!-- ÂÜÜÂΩ¢„ÅÆÊû†„Åß„Ç¢„Ç§„Ç≥„É≥ÁîªÂÉè -->
                <h1 class="rounded-full w-1/6 h-1/6 text-center bg-gray-500 ">
                    <img src="../static/images/CameraIcon.jpeg" alt="„Ç¢„Ç§„Ç≥„É≥ÁîªÂÉè" class="rounded-full">
                </h1>
                <!-- Ë¶ÅÁ¥†„ÇíÁ∏¶„Å´ÈÖçÁΩÆ -->
                <div class="flex-col items-center my-auto w-1/2 ml-2 ">

                    <nobr>
                        <h2 class="text-[8vw] font-semibold overflow-x-auto overflow-y-hidden">
                            {{ session.user_name }}
                        </h2>
                    </nobr>
                    <nobr>
                        <p class="text-[4vw] underline decoration-slate-50 overflow-x-auto overflow-y-hidden">
                            {{session.user_email}}</p>
                    </nobr>
                </div>

                <!-- /signup„Å´È£õ„Å∂ -->
                <a href="/signup" class="mx-auto my-auto text-[5vw] text-blue-500 font-bold ">
                    „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥
                </a>

            </div>
            <!-- „Éó„É≠„Éï„Ç£„Éº„É´ „Åä„Çè„Çä -->

            <!-- „ÇΩ„Éº„Éà -->
            <div class="flex justify-left px-8 py-1 text-[5vw]">
                <form action="/mypage" method="POST" id="sortDorP">
                    <!-- Êó•‰ªòorÁÇπÊï∞ ÂàùÊúüÂÄ§Êó•‰ªò -->
                    <!-- „ÇΩ„Éº„Éà„ÇÑ„Éï„Ç£„É´„Çø„Éº„ÅÆÊù°‰ª∂„ÇíËøΩÂä†„Åó„ÅüÂ†¥Âêà„ÅØ„Åì„Åì„Å´Ë®òËø∞„Åó„Å¶„ÅÑ„Åè -->
                    <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                    <input type="hidden" name="filter_point" value="{{ filter_point }}">
                    <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                    <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                    <input type="hidden" name="filter_point" value="{{ filter_point }}">
                    <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                    <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                    <select id="sortOrder" name="sort_type" onchange="document.getElementById('sortDorP').submit()">
                        <option value="date" {% if sort_type=="date" %}selected{% endif %}> Êó•‰ªòÈ†Ü</option>
                        <option value="score" {% if sort_type=="score" %}selected{% endif %}>ÁÇπÊï∞È†Ü</option>
                        <!-- <option value="ü¶Ä" {% if sort_type=="ü¶Ä" %}selected{% endif %}>„Çø„É©„Éê„Ç¨„ÉãÈ†Ü</option> -->
                    </select>
                </form>

                <form action="/mypage" method="POST" id="sortAscDesc">
                    <input type="hidden" name="sort_type" value="{{ sort_type }}">
                    <input type="hidden" name="filter_point" value="{{ filter_point }}">
                    <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                    <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                    <input type="hidden" name="filter_point" value="{{ filter_point }}">
                    <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                    <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">
                    <!-- ÊòáorÈôçÈ†Ü ÂàùÊúüÂÄ§ÈôçÈ†Ü -->
                    <select id="sortDirection" name="sort_direction"
                        onchange="document.getElementById('sortAscDesc').submit()">
                        <option value="desc" {% if sort_direction=="desc" %}selected{% endif %}>ÈôçÈ†Ü
                        </option>
                        <option value="asc" {% if sort_direction=="asc" %}selected{% endif %}>ÊòáÈ†Ü
                        </option>
                        <!-- <option value="ü¶Ä" {% if sort_direction=="ü¶Ä" %}selected{% endif %}>„Ç∫„ÉØ„Ç§„Ç¨„ÉãÈ†Ü</option> -->
                    </select>
                </form>
                <!-- „ÇΩ„Éº„Éà „Åä„Çè„Çä -->

                <!-- „Çø„Éñ„Éú„Çø„É≥ -->
                <!-- „Çø„Éñ„Éú„Çø„É≥1 -->
                <button id="tabButton1"
                    class="tab-button text-gray-500 mb-auto px-4 font-medium focus:outline-none whitespace-nowrap"
                    onclick="switchTab(1)">
                    „Éï„Ç£„É´„Çø„Éº
                </button>
                <!-- „Éá„Éº„Çø„Éú„Çø„É≥ -->
                <button id="dataButton"
                    class="text-gray-500  ml-auto p-1 font-medium focus:outline-none whitespace-nowrap"
                    onclick="showData()">
                    <svg class="" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <!-- Â§ñÊû†ÔºàËßí„Çí‰∏∏„Åè„Åô„ÇãÔºâ -->
                        <rect x="1" y="1" width="22" height="22" rx="4" ry="4" stroke-linecap="round"
                            stroke-linejoin="round" stroke-width="2"></rect>
                        <!-- Ê£í„Ç∞„É©„Éï -->
                        <rect x="4" y="10" width="3" height="10" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2"></rect>
                        <rect x="10" y="6" width="3" height="14" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2"></rect>
                        <rect x="16" y="2" width="3" height="18" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2"></rect>
                    </svg> </button>
                <!-- „Çø„Éñ„Éú„Çø„É≥ „Åä„Çè„Çä -->
            </div>

            <!-- „Çø„Éñ1„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
            <div class="px-8">
                <div id="tab1" class="tab-content hidden">
                    <div class="p-3 sm:p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
                        <!-- Áµû„ÇäËæº„Åø -->
                        <div class="flex flex-col sm:flex-row gap-4">
                            <form action="/mypage" method="POST" id="filter" novalidate="novalidate"
                                onsubmit="return submitFilter(event)" class="w-full">
                                <input type="hidden" name="sort_type" value="{{ sort_type }}">
                                <input type="hidden" name="sort_direction" value="{{ sort_direction }}">

                                <div class="flex flex-col lg:flex-row gap-4">
                                    <!-- ÁÇπÊï∞Áµû„ÇäËæº„Åø -->
                                    <div class="w-full lg:w-1/2">
                                        <label class="block text-[4vw] font-medium text-gray-700 mb-2">ÁÇπÊï∞ÁØÑÂõ≤</label>
                                        <div class="flex items-center gap-2">
                                            <input type="number"
                                                class="flex-1 w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-[4vw]"
                                                name="filter_point_start" id="filter_point_start"
                                                value="{{ filter_point_start }}" min="0" max="100" step="5"
                                                placeholder="ÊúÄÂ∞è">
                                            <span class="text-gray-500 px-1 whitespace-nowrap">„Äú</span>
                                            <input type="number"
                                                class="flex-1 w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-[4vw]"
                                                name="filter_point_end" id="filter_point_end"
                                                value="{{ filter_point_end }}" min="0" max="100" step="5"
                                                placeholder="ÊúÄÂ§ß">
                                        </div>
                                    </div>

                                    <!-- Êó•‰ªòÁµû„ÇäËæº„Åø -->
                                    <div class="w-full lg:w-1/2">
                                        <label class="block text-[4vw] font-medium text-gray-700 mb-2">ÊúüÈñì</label>
                                        <div class="flex items-center gap-2">
                                            <input type="date"
                                                class="min-w-0 flex-1 px-2 py-2 bg-gray-50 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-[4vw]"
                                                name="filter_date_start" id="filter_date_start"
                                                value="{{ filter_date_start }}">
                                            <span class="text-gray-500 px-1 whitespace-nowrap">„Äú</span>
                                            <input type="date"
                                                class="min-w-0 flex-1 px-2 py-2 bg-gray-50 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-[4vw]"
                                                name="filter_date_end" id="filter_date_end"
                                                value="{{ filter_date_end }}">
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4 flex flex-col sm:flex-row gap-2">
                                    <button type="submit"
                                        class="w-full sm:w-auto px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 text-[4vw]">
                                        „Éï„Ç£„É´„Çø„Éº„ÇíÈÅ©Áî®
                                    </button>

                                    <button type="button" onclick="location.href='/mypage'"
                                        class="w-full sm:w-auto px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 text-[4vw]">
                                        „É™„Çª„ÉÉ„Éà
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- Áµû„ÇäËæº„Åø „Åä„Çè„Çä -->
                    </div>
                </div>
            </div>
            <!-- „Çø„Éñ1„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ „Åä„Çè„Çä -->

            <!-- „Éá„Éº„Çø„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
            <div class="px-8">
                <div id="dataContent" class="hidden">
                    <div class="p-3 sm:p-4 border border-gray-200 rounded-lg bg-orange-200 shadow-sm">
                        <div class="bg-orange-200 rounded-lg">
                            <h2 class="text-[4vw] font-bold  text-center">„Éá„Éº„Çø</h2>
                            <div class="flex mx-auto">
                                <a href="/mypage" class="flex-col mx-auto">
                                    <p class="text-[4vw]">ÊúÄÈ´ò
                                    </p>
                                    <div class="flex">
                                        <p class="mt-auto text-[8vw]">{{max_score}}</p>
                                        <p class="mt-auto py-1 text-[4vw]">ÁÇπ</p>
                                    </div>
                                </a>
                                <div class="flex-col mx-auto">
                                    <p class="text-[4vw]">Âπ≥Âùá
                                    </p>
                                    <div class="flex">
                                        <p class="mt-auto text-[8vw]">{{avg_score}}</p>
                                        <p class="mt-auto py-1 text-[4vw]">ÁÇπ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- „Éá„Éº„Çø„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ „Åä„Çè„Çä -->

            <!-- „Éá„Éº„Çø„Éú„Çø„É≥Èñ¢Êï∞ -->
            <script>
                function showData() {
                    const dataButton = document.getElementById('dataButton');
                    const dataContent = document.getElementById('dataContent');

                    dataContent.classList.toggle('hidden');
                    dataButton.classList.toggle('text-gray-500');
                    dataButton.classList.toggle('text-blue-600');
                    dataButton.classList.toggle('border-b-2');
                    dataButton.classList.toggle('border-blue-600');
                }
            </script>

            <script>
                function adjustTabButtonSize() {
                    // „Çø„Éñ„Éú„Çø„É≥1„ÅÆÁ∏¶ÂπÖ„ÇíÂèñÂæó
                    var tabButton1 = document.getElementById("tabButton1");
                    var tabButton1Height = tabButton1.offsetHeight;

                    // „Éá„Éº„Çø„Éú„Çø„É≥„ÅÆÁ∏¶Ê®™ÂπÖ„ÇíË®≠ÂÆö
                    var dataButton = document.getElementById("dataButton");
                    dataButton.style.width = tabButton1Height + "px";
                    dataButton.style.height = tabButton1Height + "px";
                }

                // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å®„É™„Çµ„Ç§„Ç∫ÊôÇ„Å´ÂÆüË°å
                window.addEventListener("load", adjustTabButtonSize);
                window.addEventListener("resize", adjustTabButtonSize);
            </script>
            <!-- „Éá„Éº„Çø„Éú„Çø„É≥Èñ¢Êï∞ „Åä„Çè„Çä -->

            <!-- „Éá„Éê„ÉÉ„Ç∞„ÅßÂ§âÊï∞„ÇíË¶ã„ÇãÁî® -->
            <script>
                // <p>sort_type={{sort_type}}</p>
                // <p>sort_direction={{sort_direction}}</p>
                // <p>filter_point={{filter_point}}</p>
                // <p>filter_point_start={{filter_point_start}}</p>
                // <p>filter_point_end={{filter_point_end}}</p>
                // <p>filter_date_start={{filter_date_start}}</p>
                // <p>filter_date_end={{filter_date_end}}</p>
            </script>
            <!-- „Éá„Éê„ÉÉ„Ç∞„ÅßÂ§âÊï∞„ÇíË¶ã„ÇãÁî® „Åä„Çè„Çä-->

            {% if mypage_result_zen %}
            <!-- Â±•Ê≠¥‰∏ÄË¶ß„Ç≥„É≥„ÉÜ„Éä -->
            <div id="bentoContainer" class="flex-col items-center">
                <div id="bentoContainer" class="flex-col items-center">
                    {% for id,score, bento_url, create_date in mypage_result_zen %}
                    <!-- Â±•Ê≠¥Ë¶ÅÁ¥† -->
                    <!--Â±•Ê≠¥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->

                    <div class="bento-item flex-col mx-8 my-3 rounded bg-gray-50 cursor-pointer "
                        data-score="{{ score }}" data-date="{{ create_date }}"
                        onclick="showScoreDetails('{{ id }}', '{{ score }}', '{{ bento_url }}', '{{ create_date }}')">
                        <h1 class="bg-yellow-200 px-1 mx-auto my-auto text-[4vw] rounded-t">{{ create_date }}</h1>
                        <div class="flex justify-center">
                            <div class="mr-auto my-auto w-1/4 h-1/4 rounded-bl">
                                <img class="rounded-bl" src="{{ bento_url }}" alt="Bento Image">
                            </div>
                            <div class="mx-auto my-auto text-[12vw]">
                                {{ score }}ÁÇπ
                            </div>
                            <p class="mx-auto mt-auto pr-1 text-right text-[4vw]  w-1/3 whitespace-nowrap">
                                {% if score >= 95 %}
                                „ÅäÂºÅÂΩì„Éû„Çπ„Çø„ÉºÔºÅ
                                {% elif score >= 90 %}
                                ÂÆåÁíßÔºÅ
                                {% elif score >= 70 %}
                                Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅ
                                {% elif score >= 60 %}
                                „ÇÇ„ÅÜÂ∞ë„Åó
                                {% else %}
                                „Åæ„Å†„Åæ„Å†
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p>„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
                {% endif %}

                <!-- „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÅÆ„É™„É≥„ÇØ -->
                <div class="flex flex-wrap justify-center items-center gap-1 p-4">
                    {% if page > 1 %}
                    <form action="/mypage" method="POST" class="m-2">
                        <input type="hidden" name="page" value="1">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            << </button>
                    </form>
                    {% endif %}


                    <!-- page-2„Åå0„Å´„Å™„ÇãÂ†¥Âêà„ÄÅË°®Á§∫„Åó„Å™„ÅÑ -->
                    {% if page - 2 > 0 %}
                    <form action="/mypage" method="POST" class="m-1">
                        <input type="hidden" name="page" value="{{ page - 2 }}">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            {{ page - 2 }}
                        </button>
                    </form>
                    {% endif %}

                    <!-- page-1„Åå0„Å´„Å™„ÇãÂ†¥Âêà„ÄÅË°®Á§∫„Åó„Å™„ÅÑ -->
                    {% if page - 1 > 0 %}
                    <form action="/mypage" method="POST" class="m-1">
                        <input type="hidden" name="page" value="{{ page - 1 }}">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            {{ page - 1 }}
                        </button>
                    </form>
                    {% endif %}

                    <!-- ÁèæÂú®„ÅÆ„Éö„Éº„Ç∏ -->
                    <div class="m-1">
                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-black bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            {{ page }}
                        </button>
                    </div>
                    <!-- ‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„ÇãÂÖ®„Å¶„ÅÆ„ÅäÂºÅÂΩì„ÅÆ„Éá„Éº„ÇøÊï∞ÔºûÁèæÂú®„Éö„Éº„Ç∏*Ë°®Á§∫„Åï„Çå„Å¶„ÅÑ„Çã„ÅäÂºÅÂΩì„ÅÆ„Éá„Éº„ÇøÊï∞„ÄÄ„ÅÆ„Å®„Åç Ë°®Á§∫„Åô„Çã-->
                    {% if mypage_data_size > page * page_contents %}
                    <!-- „Éö„Éº„Ç∏„É≥„Ç∞„ÅÆÈöõ„Å´page„Å®sort_type„Å®sort_direction„ÇíPOST„ÅßÈÄÅ„Çã -->
                    <form action="/mypage" method="POST" class="m-1">
                        <input type="hidden" name="page" value="{{ page + 1 }}">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            {{ page + 1 }}
                        </button>
                    </form>

                    {% endif %}

                    {% if mypage_data_size > page * page_contents + 5 %}
                    <form action="/mypage" method="POST" class="m-1">
                        <input type="hidden" name="page" value="{{ page + 2 }}">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            {{ page + 2 }}
                        </button>
                    </form>
                    {% endif %}
                    <!-- ÊúÄÁµÇ„Éö„Éº„Ç∏ „Å´È£õ„Å∂-->

                    <!-- ‰Ωô„Çä„Éö„Éº„Ç∏„Åå„ÅÇ„ÇãÂ†¥Âêà -->
                    <!-- „Éá„Éº„ÇøÊï∞√∑8„Åå0‰ª•Â§ñ -->
                    {% if (mypage_data_size % page_contents != 0) %}
                    <!-- „Éá„Éº„ÇøÊï∞„ÅåÔºò„Çà„ÇäÂ§ß„Åç„ÅÑ -->
                    {% if mypage_data_size > page_contents %}
                    <!-- ÁèæÂú®„Éö„Éº„Ç∏„ÅåÊúÄÂæå„ÅÆ„Éö„Éº„Ç∏„Çà„ÇäÂ∞è„Åï„ÅÑ Â†¥Âêà Ë°®Á§∫ -->
                    {% if page != (mypage_data_size // page_contents) + 1 %}
                    <form action="/mypage" method="POST" class="m-2">
                        <input type="hidden" name="page" value="{{ mypage_data_size // page_contents + 1 }}">
                        <input type="hidden" name="sort_type" value="{{ sort_type }}">
                        <input type="hidden" name="sort_direction" value="{{ sort_direction }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_point_start" value="{{ filter_point_start }}">
                        <input type="hidden" name="filter_point_end" value="{{ filter_point_end }}">
                        <input type="hidden" name="filter_point" value="{{ filter_point }}">
                        <input type="hidden" name="filter_date_start" value="{{ filter_date_start }}">
                        <input type="hidden" name="filter_date_end" value="{{ filter_date_end }}">

                        <button type="submit"
                            class="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center text-[4vw] text-blue-500 bg-gray-200 hover:bg-gray-300 border border-gray-800 rounded-md">
                            >>
                        </button>
                    </form>
                    {% endif %}
                    {% endif %}
                    {% endif %}
                </div>
                <!-- „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÅÆ„É™„É≥„ÇØ „Åä„Çè„Çä -->
            </div>
    </main>
    {% include "footer.html" %}

    <!-- Êé°ÁÇπÁµêÊûúÁîªÈù¢„ÇíË°®Á§∫„Åô„Çã„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" onclick="closeScoreDetails()"></div>
    <div id="scoreDetails" class="fixed inset-0 flex justify-center items-center z-40 hidden pointer-events-none">
        <div class="bg-gray-50 rounded-lg p-6 w-11/12 md:w-1/2 lg:w-1/3 pointer-events-auto">
            <div class="flex justify-between mb-4 border-b border-black"> <!-- „Éú„Çø„É≥„ÇíÂè≥ÂØÑ„Åõ -->
                <h2 class="text-xl font-bold my-auto">Êé°ÁÇπÁµêÊûú</h2>
                <button class="bg-orange-400 text-gray-50 w-10 h-10 rounded-full mb-2"
                    onclick="closeScoreDetails()">‚úï</button>
            </div>

            <div id="scoreContent"></div>
            <form action="/mypage/log" method="post" enctype="multipart/form-data">
                <input type="hidden" id="hidden_id" name="id" value="{{id}}">
                <input type="hidden" id="hidden_score" name="score" value="{{score}}">
                <input type="hidden" id="hidden_bento_url" name="bento_url" value="{{bento_url}}">
                <input class="mt-4 bg-orange-400 text-white py-2 px-4 rounded cursor-pointer" type="submit"
                    value="Ë©≥Á¥∞„Éö„Éº„Ç∏„Å∏">
            </form>
        </div>
    </div>


    <!-- „Çø„Éñ„ÅÆÈñ¢Êï∞-->
    <script>
        let currentTab = 1; // ÂàùÊúüË°®Á§∫„Çø„Éñ
        function switchTab(tabNumber) {
            const tabContent = document.getElementById(`tab${tabNumber}`);
            const tabButton = document.getElementById(`tabButton${tabNumber}`);

            if (currentTab === tabNumber && !tabContent.classList.contains('hidden')) {
                //„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫„Å´„Åô„Çã
                tabContent.classList.add('hidden');
                //„Éú„Çø„É≥„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´„Åô„Çã
                tabButton.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                tabButton.classList.add('text-gray-500');
                currentTab = null
                return;
            }

            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Éú„Çø„É≥„Åã„ÇâÈÅ∏ÊäûÁä∂ÊÖã„ÇíËß£Èô§
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                button.classList.add('text-gray-500');
            });

            // ÈÅ∏Êäû„Åó„Åü„Çø„Éñ„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            document.getElementById(`tab${tabNumber}`).classList.remove('hidden');
            // ÈÅ∏Êäû„Åó„Åü„Çø„Éñ„Éú„Çø„É≥„Çí„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„Å´
            document.getElementById(`tabButton${tabNumber}`).classList.remove('text-gray-500');
            document.getElementById(`tabButton${tabNumber}`).classList.add('text-blue-600', 'border-b-2', 'border-blue-600');

            currentTab = tabNumber;
        }
    </script>
    <!-- „Çø„Éñ„ÅÆÈñ¢Êï∞ „Åä„Çè„Çä -->
    <!-- „Ç®„É©„Éº„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÄÅÈÄÅ‰ø° -->
    <script>
        function submitFilter(event) {
            event.preventDefault();
            let error_str = '';
            let error_flag = 0;

            // ÂÖ•Âäõ„ÅåÊï∞ÂÄ§„Åã„Å©„ÅÜ„Åã„ÉÅ„Çß„ÉÉ„ÇØ
            let startValue = document.getElementById('filter_point_start').value;
            let endValue = document.getElementById('filter_point_end').value;

            // Á©∫ÁôΩ„ÉÅ„Çß„ÉÉ„ÇØ
            if (startValue.trim() === '' || endValue.trim() === '') {
                error_str += 'ÈñãÂßãÁÇπÊï∞„Å®ÁµÇ‰∫ÜÁÇπÊï∞„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n';
                error_flag = 1;
            }
            // Êï∞ÂÄ§„ÉÅ„Çß„ÉÉ„ÇØ
            if (isNaN(startValue)) {
                error_str += 'ÈñãÂßãÁÇπÊï∞„ÅØÊï∞ÂÄ§„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n';
                error_flag = 1;
            }
            if (isNaN(endValue)) {
                error_str += 'ÁµÇ‰∫ÜÁÇπÊï∞„ÅØÊï∞ÂÄ§„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n';
                error_flag = 1;
            }

            // Êï∞ÂÄ§„ÅÆÁØÑÂõ≤„ÉÅ„Çß„ÉÉ„ÇØ
            const start = parseInt(startValue);
            const end = parseInt(endValue);

            if (start > end) {
                error_str += 'ÈñãÂßãÁÇπÊï∞„ÅåÁµÇ‰∫ÜÁÇπÊï∞„Çà„ÇäÂ§ß„Åç„ÅÑ„Åß„Åô„ÄÇ\n';
                error_flag = 1;
            }

            if (start < 0 || start > 100) {
                error_str += 'ÈñãÂßãÁÇπÊï∞„ÅØ0~100„ÅÆÈñì„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n';
                error_flag = 1;
            }
            if (end < 0 || end > 100) {
                error_str += 'ÁµÇ‰∫ÜÁÇπÊï∞„ÅØ0~100„ÅÆÈñì„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n';
                error_flag = 1;
            }

            // Êó•‰ªò„ÅÆÁØÑÂõ≤„ÉÅ„Çß„ÉÉ„ÇØ
            const startDate = document.getElementById('filter_date_start').value;
            const endDate = document.getElementById('filter_date_end').value;
            // „ÇÇ„ÅóÈñãÂßãÊó•‰ªò„Çà„ÇäÁµÇ‰∫ÜÊó•‰ªò„ÅåÂâç„ÅÆÂ†¥Âêà
            if (startDate > endDate && startDate.trim() !== '' && endDate.trim() !== '') {
                error_str += 'ÈñãÂßãÊó•‰ªò„ÅåÁµÇ‰∫ÜÊó•‰ªò„Çà„ÇäÂæå„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n';
                error_flag = 1;
            }



            if (error_flag === 1) {
                alert(error_str);
                return false;
            }

            document.getElementById('filter').submit();
            return false;
        }
    </script>
    <!-- „Ç®„É©„Éº„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÄÅÈÄÅ‰ø° „Åä„Çè„Çä -->

    <!-- Ë©≥Á¥∞„Éü„ÉãÁîªÈù¢ -->
    <script>
        const hiddenId = document.getElementById('hidden_id');
        const hiddenScore = document.getElementById('hidden_score');
        const hiddenBentoUrl = document.getElementById('hidden_bento_url');

        const overlay = document.getElementById('overlay');
        const scoreDetails = document.getElementById('scoreDetails');

        function showScoreDetails(id, score, bentoUrl, date) {
            document.getElementById("scoreContent").innerHTML = `
            <div class="flex justify-left">
                <div class="mt-auto">
                    ÁÇπÊï∞:
                </div>
                <div class="text-2xl font-bold">
                    ${score}
                </div>
            </div>
            <p class="">Êó•‰ªò: ${date} </p>
            <img src="${bentoUrl}" alt="Bento Image" class="w-full h-auto mt-4 rounded-md">
        `;

            hiddenId.value = id;
            hiddenScore.value = score;
            hiddenBentoUrl.value = bentoUrl;
            overlay.classList.remove("hidden");
            scoreDetails.classList.remove("hidden");
        }

        function closeScoreDetails() {
            overlay.classList.add("hidden");
            scoreDetails.classList.add("hidden");
        }

    </script>
</body>

</html>